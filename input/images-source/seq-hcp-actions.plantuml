@startuml
actor "Health Care Professional" as HCP
participant "HCP App" as HCP_APP
participant "EHR-S" as EHR_S

==== HCP authentication and identification ====
group #00FF00 "Auth and Identification (HCP and HCP App)"
HCP -[#blue]> HCP_APP: Authenticates and identifies
HCP_APP -> HCP_APP: Validate session and context
end group

==== Patient identification search ====
group "Patient identification search"
HCP -> HCP_APP: Search patient
activate HCP_APP
HCP_APP -> EHR_S: Query patient identity
EHR_S --> HCP_APP: Patient identity
HCP_APP --> HCP: Display patient match
deactivate HCP_APP
end group

==== Create care plan ====
group "Create care plan"
HCP -> HCP_APP: Start care plan creation
activate HCP_APP
opt Consult patient health data
HCP_APP -> EHR_S: Retrieve patient health data
EHR_S --> HCP_APP: Patient health data
end opt
HCP_APP -> HCP_APP: Create care plan
HCP_APP -> EHR_S: Publish care plan
EHR_S --> HCP_APP: Confirmation
HCP_APP --> HCP: Show care plan status
deactivate HCP_APP
end group

==== Execute and record action ====
group "Execute and record action"
HCP -> HCP_APP: Execute care plan actions
activate HCP_APP
HCP_APP -> HCP_APP: Execute actions
HCP_APP -> HCP_APP: Document execution
HCP_APP -> EHR_S: Record executed actions
EHR_S -> EHR_S: Record executed actions
EHR_S --> HCP_APP: Confirmation
HCP_APP --> HCP: Show action status
opt Update care plan based on executed actions
EHR_S -> EHR_S: Update care plan
end opt
deactivate HCP_APP
end group

==== Monitor care plan ====
group "Monitor care plan"
HCP -> HCP_APP: Monitor care plan
activate HCP_APP
HCP_APP -> EHR_S: Query care plan
EHR_S --> HCP_APP: Care plan data
opt Consult patient health data
HCP_APP -> EHR_S: Retrieve patient health data
EHR_S --> HCP_APP: Patient health data
end opt
opt Consult orders status
HCP_APP -> EHR_S: Query orders status
EHR_S --> HCP_APP: Orders status
end opt
HCP_APP -> HCP_APP: Display care plan
HCP_APP -> HCP_APP: Edit care plan
HCP_APP -> EHR_S: Publish care plan update
EHR_S --> HCP_APP: Confirmation
HCP_APP --> HCP: Show updated care plan
deactivate HCP_APP
end group

@enduml
